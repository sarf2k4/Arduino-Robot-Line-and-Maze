#include <ArduinoRobot.h>
#include <Wire.h>
#include <SPI.h>

double THRESHOLD =500;

double Speed = 255;
int State = 0;
int irs[5];

void setup()
{
  //Speed = 255*(MULTIPLIER/100);
  Serial.begin(9600);

  Robot.begin();
  Robot.beginTFT();
}

void loop()
{
  
  dir(irs);
  //Robot.motorsWrite(255,255);
  Serial.println("");
  Serial.println(Speed);
    Serial.println("spin"); 
  //delay(100);

}

void dir(int irs[5])
{
  String stat = "";
  Robot.updateIR();
  for(int i=0; i<5; i++){
    irs[i]=Robot.IRarray[i];
    Serial.print(Robot.IRarray[i]);
    Serial.print(" ");
  }
  
  Serial.println("");
  
  Robot.stroke(0,0,0);
  Robot.textSize(1);
  
  // turn right
  if (irs[0]<THRESHOLD)
  {
    Robot.motorsWrite(96,16);
    Serial.println("0 to right (128,32)");
Robot.text("right 1",0,0);
  }
  if (irs[1]<THRESHOLD || ((irs[2]<THRESHOLD) && (irs[1]<THRESHOLD)))
  {
Robot.motorsWrite(96,16);
Serial.println("1 to right (64,32)");
Robot.text("right 2",0,0);
  }
  // turn left
  if (irs[3]<THRESHOLD || ((irs[2]<THRESHOLD) && (irs[3]<THRESHOLD)))
  {
Robot.motorsWrite(16,96);
	Serial.println("3 to left (32,64)");
Robot.text("left 1",0,0);
  }
  if (irs[4]<THRESHOLD)
  {
Robot.motorsWrite(16,96);
	Serial.println("4 to left (32,128)");
Robot.text("left 2",0,0);
  }
  
  if((irs[2]<THRESHOLD))
  {
	Robot.motorsWrite(Speed,Speed);
	Serial.println("straight");
Robot.text("straight 1",0,0);
  }
  
  if((irs[1]<THRESHOLD) && (irs[2]<THRESHOLD) && (irs[3]<THRESHOLD))
  {
	Robot.motorsWrite(Speed,Speed);
	Serial.println("straight");
Robot.text("straight 3",0,0);
  }

  
  //txt(stat);
}

void txt(String stat)
{
  
}
